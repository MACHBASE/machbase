---
title: Linux service
type: docs
weight: 82
published: false
---

# Linux service

Using systemd or supervisord, you can monitor and control machbase-neo, and configure it to start automatically when the system restarts.

## Using systemd

### Create neo-start.sh

```sh
$ vi neo-start.sh
```

> #!/bin/bash   
> /home/machbase/neo/machbase-neo serve --host 0.0.0.0 --log-filename /home/machbase/neo/log/machbase-neo.log

```sh
$ chmod 755 neo-start.sh
```
### Create neo.service

```sh
$ cd /etc/systemd/system
$ sudo vi neo.service
```

> [Unit]   
> Description=neo service   
> StartLimitBurst=10   
> StartLimitIntervalSec=10   
>   
> [Service]   
> User=machbase   
> LimitNOFILE=65535   
> ExecStart=/home/machbase/neo/neo-start.sh   
> ExecStop=/home/machbase/neo/machbase-neo shell shutdown   
> ExecStartPre=sleep 2   
> WorkingDirectory=/home/machbase/neo   
> Restart=always   
> RestartSec=1   
>   
> [Install]   
> WantedBy=multi-user.target   

* Modify the user and paths according to your environment.

### Activate the service.

```sh
$ sudo chmod 755 neo.service
$ sudo systemctl daemon-reload
```

Set to start automatically after boot.

```sh
$ sudo systemctl enable neo.service
```

After activating the service, you can control it with the following commands:

```sh
$ sudo systemctl start neo.service
$ sudo systemctl status neo.service
$ sudo systemctl stop neo.service
```

## Using supervisor

### Create neo.conf

```sh
$ cd /etc/supervisor/conf.d
$ sudo vi neo.conf
```
> [program:neo]   
> command=/home/machbase/neo/machbase-neo serve --host 0.0.0.0 --log-filename /home/machbase/neo/log/machbase-neo.log   
>   
> priority=10   
> autostart=true   
> autorestart=true   
> environment=HOME=/home/machbase   
> stdout_logfile=/home/machbase/neo/log/machbase-neo_stdout.log   
> stderr_logfile=/home/machbase/neo/log/machbase-neo_stderr.log   
> user=machbase   

* Modify the user and paths according to your environment.
* In the above example, the /home/machbase/neo/log folder must be created in advance.

### Update Supervisor

```sh
$ sudo supervisorctl reread
$ sudo supervisorctl update
```

After activating the service, you can control machbase-neo with the following commands:
```sh
$ sudo supervisorctl start neo
$ sudo supervisorctl status neo
$ sudo supervisorctl stop neo
```
